{"AWSTemplateFormatVersion":"2010-09-09","Description":"Outputs the time","Resources":{"TimeFunction":{"Type":"AWS::Lambda::Function","Properties":{"Code":{"S3Bucket":"celebrityquotes2","S3Key":"85e844eb109f11576d2690fe00e56eda"},"Handler":"index.handler","Role":{"Fn::GetAtt":["TimeFunctionRole","Arn"]},"Runtime":"nodejs4.3","Tags":[{"Value":"SAM","Key":"lambda:createdBy"}]}},"ServerlessRestApiDeployment5279bf18db":{"Type":"AWS::ApiGateway::Deployment","Properties":{"RestApiId":{"Ref":"ServerlessRestApi"},"Description":"RestApi deployment id: 5279bf18db54dd2e8ef893ecc6eaa5dc554f4a86","StageName":"Stage"}},"TimeFunctionRole":{"Type":"AWS::IAM::Role","Properties":{"ManagedPolicyArns":["arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"],"AssumeRolePolicyDocument":{"Version":"2012-10-17","Statement":[{"Action":["sts:AssumeRole"],"Effect":"Allow","Principal":{"Service":["lambda.amazonaws.com"]}}]}}},"TimeFunctionMyTimeApiPermissionTest":{"Type":"AWS::Lambda::Permission","Properties":{"Action":"lambda:invokeFunction","Principal":"apigateway.amazonaws.com","FunctionName":{"Ref":"TimeFunction"},"SourceArn":{"Fn::Sub":["arn:aws:execute-api:${AWS::Region}:${AWS::AccountId}:${__ApiId__}/${__Stage__}/GET/TimeResource",{"__Stage__":"*","__ApiId__":{"Ref":"ServerlessRestApi"}}]}}},"ServerlessRestApiProdStage":{"Type":"AWS::ApiGateway::Stage","Properties":{"DeploymentId":{"Ref":"ServerlessRestApiDeployment5279bf18db"},"RestApiId":{"Ref":"ServerlessRestApi"},"StageName":"Prod"}},"TimeFunctionMyTimeApiPermissionProd":{"Type":"AWS::Lambda::Permission","Properties":{"Action":"lambda:invokeFunction","Principal":"apigateway.amazonaws.com","FunctionName":{"Ref":"TimeFunction"},"SourceArn":{"Fn::Sub":["arn:aws:execute-api:${AWS::Region}:${AWS::AccountId}:${__ApiId__}/${__Stage__}/GET/TimeResource",{"__Stage__":"Prod","__ApiId__":{"Ref":"ServerlessRestApi"}}]}}},"ServerlessRestApi":{"Type":"AWS::ApiGateway::RestApi","Properties":{"Body":{"info":{"version":"1.0","title":{"Ref":"AWS::StackName"}},"paths":{"/TimeResource":{"get":{"x-amazon-apigateway-integration":{"httpMethod":"POST","type":"aws_proxy","uri":{"Fn::Sub":"arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/${TimeFunction.Arn}/invocations"}},"responses":{}}}},"swagger":"2.0"}}}}}